<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <style>
        .carousel-inner > .item > img,
        .carousel-inner > .item > a > img {
            width: 70%;
            margin: auto;
        }
    </style>
</head>
<div class="container">
    <br>

    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
            <li data-target="#myCarousel" data-slide-to="3"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">

            <div class="item active">
                <img src="4.gif" alt="Chania" style="width: 600px; height:400px">

                <div class="carousel-caption">
                    <h3>ble</h3>

                    <p>ble</p>
                </div>
            </div>

            <div class="item">
                <img id="image1" src="4.jpg" alt="Chania" style="width: 600px; height:400px">

                <div class="carousel-caption">
                    <h3>ble</h3>

                    <p>ble</p>
                </div>
            </div>

            <div class="item">
                <img src="2.jpg" alt="Flower" style="width: 600px; height:400px">

                <div class="carousel-caption">
                    <h3>ble</h3>

                    <p>ble</p>
                </div>
            </div>

            <div class="item">
                <img src="3.jpg" alt="Flower" style="width: 600px; height:400px">

                <div class="carousel-caption">
                    <h3>ble</h3>

                    <p>ble</p>
                </div>
            </div>

        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<div id="logger"></div>
<div id="num">new number</div>
<button id="nextNumber" onclick="nextNumber()">start</button>
<br/>
<span style="max-height:100px" id="info">blee</span>
<br/>
<div class="alert alert-success" role="alert">
    <a href="#" class="alert-link">...</a>
</div>

<div class="alert alert-danger" role="alert">

</div>
<canvas id="myCanvas" style=" margin:20px" width="400" height="400"></canvas>


<script>
    var newNumber = 0;
    var numbers=[];
    function nextNumber() {
      //  alert(numbers.indexOf(1));
        newNumber = Math.floor((Math.random() * 4) + 1);
        while(numbers.indexOf(newNumber) !== -1){

                newNumber = Math.floor((Math.random() * 4) + 1);


        }


        $('#num').text(newNumber);
    }
    var canvas = document.getElementById('myCanvas');
    context = canvas.getContext("2d");

    var canvasMouseX;
    var canvasMouseY;
    var width = 400;
    var height = 400;
    var imgBlurred = new Image();
    imgBlurred.src = '4b.jpg';
    var imgBlurredW = imgBlurred.width;
    var imgBlurredH = imgBlurred.height;
    var img = new Image();
    img.src = '4.jpg';
    img.onload = function () {
        context.drawImage(img, 0, 0, width, height);
        context.beginPath();
        context.lineWidth = 1;
        context.strokeStyle = '#ff0000'
        context.strokeRect(0, 0, width / 2, height / 2);
        context.strokeRect(width / 2, 0, width, height / 2);
        context.strokeRect(0, height / 2, width / 2, height);
        context.strokeRect(width / 2, height / 2, width, height);
        context.fill();
        context.stroke();
    }

    $('#myCanvas').mousemove(function (event) {

        canvasMouseX = event.clientX - (canvas.offsetLeft - window.pageXOffset);
        canvasMouseY = event.clientY - (canvas.offsetTop - window.pageYOffset);
        //  $('#logger').text(canvasMouseX + "   " + canvasMouseY);
    });

    $('#myCanvas').mousedown(function (event) {

        if (canvasMouseX > 0 && canvasMouseX < width / 2 && canvasMouseY > 0 && canvasMouseY < height / 2) {
            if (newNumber === 1) {
             //   alert("ok");
                numbers.push(newNumber);

                context.drawImage(imgBlurred, 0, 0, imgBlurredW / 2, imgBlurredH / 2, 0, 0, width / 2, height / 2);
                if (numbers.length === 4) {

                    alert('gratulacje !!!!');
                    $('#nextNumber').attr('disabled', true);
                    $('#num').text("");
                }
            } else {
               // alert("niet :(");
            }
        }
        if (canvasMouseX > width / 2 && canvasMouseX < width && canvasMouseY > 0 && canvasMouseY < height / 2) {
            if (newNumber === 2) {
                numbers.push(newNumber);
                //   alert("ok");
                context.drawImage(imgBlurred, imgBlurredW / 2, 0, imgBlurredW, imgBlurredH / 2, width / 2, 0, width, height / 2);
                if (numbers.length === 4) {

                alert('gratulacje !!!!');
                $('#nextNumber').attr('disabled', true);
                $('#num').text("");
            }
            } else {
             //   alert("niet :(");
            }
        }
        if (canvasMouseX > 0 && canvasMouseX < width / 2 && canvasMouseY > height / 2 && canvasMouseY < height) {
            if (newNumber === 3) {
                numbers.push(newNumber);
               // alert("ok");
                context.drawImage(imgBlurred, 0, imgBlurredH / 2, imgBlurredW / 2, imgBlurredH, 0, height / 2, width / 2, height);
                if (numbers.length === 4) {

                    alert('gratulacje !!!!');
                    $('#nextNumber').attr('disabled', true);
                    $('#num').text("");
                }
            } else {
                //alert("niet :(");
            }
        }
        if (canvasMouseX > width / 2 && canvasMouseX < width && canvasMouseY > height / 2 && canvasMouseY < height) {
            if (newNumber === 4) {
                numbers.push(newNumber);
              //  alert("ok");
                context.drawImage(imgBlurred, imgBlurredW / 2, imgBlurredH / 2, imgBlurredW, imgBlurredH, width / 2, height / 2, width, height);
                if (numbers.length === 4) {

                    alert('gratulacje !!!!');
                    $('#nextNumber').attr('disabled', true);
                    $('#num').text("");
                }
            } else {
              //  alert("niet :(");
            }
        }
    });


</script>